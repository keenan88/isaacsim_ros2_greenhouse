FROM moveit/moveit2:humble-release

RUN apt-get update
RUN apt install vim -y

RUN apt install gnome-terminal dbus-x11 -y

ENV ROS_DOMAIN_ID=1

# Reccomended DDS for moveit is cyclone
RUN apt install ros-$ROS_DISTRO-rmw-cyclonedds-cpp -y
ENV RMW_IMPLEMENTATION=rmw_cyclonedds_cpp

# Need realsense message types
RUN apt install ros-humble-realsense2-* -y

# Nvidia driver installation
RUN echo "keyboard-configuration keyboard-configuration/layoutcode select us" | debconf-set-selections
RUN echo "keyboard-configuration keyboard-configuration/xkb-keymap select us" | debconf-set-selections
ENV DEBIAN_FRONTEND=noninteractive
ENV KEYBOARD_KEYMAP=us
ENV KEYBOARD_MODEL=pc105
ENV KEYBOARD_LAYOUT=us
RUN apt-get install locales -y
RUN locale-gen en_US en_US.UTF-8
RUN update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8
RUN export LANG=en_US.UTF-8
RUN apt-get install nvidia-driver-535 -y

RUN echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc
RUN echo "source /home/kortex_ws/install/setup.bash" >> ~/.bashrc
RUN echo "source /home/humble_ws/install/setup.bash" >> ~/.bashrc
 